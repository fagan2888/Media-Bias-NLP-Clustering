Washington (CNN) Paul Ryan wants to prove he's changed things in the House, and that he won't cut the kind of late night, back room deals that former Speaker John Boehner worked out with House Minority Leader Nancy Pelosi that infuriated conservatives.

But Friday at midnight, federal government agencies run out of money and the new speaker faces his biggest test so far: hammering out the final deal to avoid another government shutdown.

Boehner may be gone, but the underlying dynamic in House hasn't changed - there is a bloc of conservatives that won't back any spending bill unless it includes some controversial items -- like defunding Obamacare -- that are non-starters for Democrats and will draw President Barack Obama's veto. Ryan also recognizes he will be forced to accept some Democratic priorities in the bill in order to get their votes to pass it, and that too will antagonize those on the right flank of his conference.

The balancing act is tough -- and the speaker is looking to keep his fingerprints off the bill for as long as he can. He told House Republicans at a closed-door meeting on Thursday the process and end-of-year timing was a "crap sandwich." But Ryan also wants to rack up some wins on the spending bill and prove there will be less drama under his tenure around votes on important bills.

Ryan repeatedly stresses he's following an "open process" that empowers committee leaders -- a goal shared by Boehner's critics. He's left the wheeling and dealing to House Appropriations Committee Chairman Hal Rogers, R-Kentucky, who is trading offers and counter offers with his Democratic counterparts and those on both sides of the aisle in the Senate. Negotiators crafting the bill worked through the weekend. Much of the time in the final days is spent haggling over dozens of "policy riders" Republicans and Democrats insist are included in the final version of the bill. But few details emerged on which riders will make the cut.

Sen. Barbara Mikulski, the top Democrat on the Senate Appropriations Committee, was upbeat about the talks but kept details close to her vest.

"We're actually making progress. And the less said the better," Mikulski told reporters.

After the terror attacks in Paris and California -- raising concerns in Congress about additional domestic attacks inspired by ISIS -- national security issues are a prominent part of the talks.

House conservatives, who have repeatedly insisted on defunding Obamacare and Planned Parenthood, are instead pressing leaders to include a bill that could pause a program allowing into the U.S. refugees from Syria and Iraq. The measure, passed with a veto-proof majority in the House , requires the Secretary of Homeland Security certify those refugees won't present a security threat.

The goal is to release final legislative text Monday or Tuesday. If leaders can't pass a bill through both chambers and get it to the President to sign by Friday night they will need to pass a short-term funding measure so they can finish the bill next week. The House and Senate are both scheduled to leave town December 18.

Some Republicans who are eager to lift the specter of another government shutdown are frustrated with those House GOP members who opposed a recent bipartisan budget deal that set the spending levels for the current bill being drafted. They say the lopsided vote on that -- with only 79 House Republicans backing it -- weakened the hand of GOP negotiators. Democrats are using that vote as leverage, reminding Republicans that they got the deal through and will be needed to approve this spending bill too.

"When our leaders in both houses negotiate a deal the majority has to be willing to support it," said Rep. Tom Cole, R-Oklahoma, who voted for the budget measure earlier this fall. "We have a lot of members that are part of the 'vote no, hope yes' crowd."

Since that budget deal set the top line numbers, this bill sets out detailed spending levels for each federal agency, and many are in line for significant increases since the new budget added money for both defense and domestic programs.

McConnell pushing campaign finance changes

Campaign finance rules have also become a flashpoint in the talks.

One controversial rider pushed by Senate Majority Leader Mitch McConnell would eliminate the current cap on how much political party organizations, such as the Republican and Democratic national committees, can spend directly in coordination with their candidates. McConnell, a longtime opponent of campaign finance rules, wants to make the change to help even the playing field for the political parties against the Super PACs that have dominated recent elections.

Super PACs aren't allowed to coordinate with candidates, but can raise unlimited amounts of money, and some, such as with the Koch brothers network, are starting to take on traditional party rules such as ground organizing, polling and data collection.

A senior Senate Democratic aide said, "there is very little enthusiasm for that provision in our caucus," but added it is possible it could end up in the bill when the top four congressional leaders finalize a compromise.

A letter from 110 House Democrats to House and Senate party leaders last week urged them not to include the provision about the party committees in the omnibus.

"This change would be a travesty," said the letter spearheaded by Reps. John Sarbanes of Maryland and Ted Deutch of Florida. "This change in the law would only further surrender the party apparatus to the influence of millionaires and billionaires."

McConnell aides note the same provision was included in a Democratic campaign finance proposal pushed by Sen. Chuck Schumer, D-New York, and others, although Democrats say it was included in that proposal primarily as a way to attract Republicans to the bill.

But conservatives in the House Freedom caucus oppose that measure, saying it gives the establishment wing of the party too much power, and could hurt future outsider candidates who aren't backed by the parties to compete for congressional seats.

"We think that is not the direction we need to go," Freedom Caucus Chairman Jim Jordan told reporters last week.

Policy riders

Other contentious talks center around efforts by Republicans to effectively block some Obama administration environmental rules such as new limits on greenhouse gas emissions and water pollution, as well as rolling back banking regulations in the Dodd-Frank financial services law.

Pelosi last week railed against the initial offer presented by Republicans, saying, "what they sent us back takes your breath away," and pointing to the policy provisions said, "it's a bill choking under special interest riders."