CVS executives knew that some of their sales would go up in smoke when they decided last year to stop selling cigarettes. The press release announcing that all 7,600 CVS stores nationwide would stop selling all tobacco products acknowledged that sales would take a hit. Still, the company said, “This is the right thing to do.”

The costs of the decision are now becoming clear. CVS Health’s general merchandise sales slumped 7.8 percent last quarter on a same-store basis, the company said Tuesday. The company claims non-pharmacy sales would have stayed the same if tobacco sales — and the other products cigarette buyers added to their baskets — were removed from sales figures for the same quarter in 2014.

Related: Why Smoking Is Even Worse Than We Thought

Same-store sales in the pharmacy category climbed 4.1 percent, boosting overall same-store sales growth to 0.5 percent compared with the second quarter of last year, down from a 1.2 percent year-over-year increase the previous quarter. Net revenue overall grew by 7.4 percent to $37.2 billion, helped by pharmacy services revenue that surged 11.9 percent ($2.6 billion) to $24.4 billion. The company has reportedly increased its market share in the health and beauty categories (it did, however, narrow its full-year earnings forecast).

So even as the move to drop cigarettes has cost the company, its bet on health as the source of future growth may be starting to pay off. CVS stock dropped in the wake of its earnings announcement, but shares are still up more than 15 percent on the year and 44 percent over the past 12 months.