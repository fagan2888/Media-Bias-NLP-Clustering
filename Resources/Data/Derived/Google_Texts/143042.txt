The last American commander in Iraq recommended to the Obama administration that 23,000 U.S. troops remain to cement the victory, but no deal was ever reached with Baghdad, and all combat forces went home.

That stalemate has come back to haunt the country as al Qaeda-linked extremists, who had been defeated by 2011, have returned to Iraq in a terrorist campaign to capture huge swaths of territory in northern and western areas.

The extremists, known as the Islamic State of Iraq and the Levant (ISIL or ISIS, for Syria), are threatening Baghdad and could be on the verge of creating an enormous terrorist state that menaces the world.

SEE ALSO: For any U.S. airstrike to succeed, the Iraqi army must stand and fight, experts say

Retired ArmyGen. John M. Keane, who advised commanders in Iraq and helped devise the 2007 troop surge, remembers how the U.S. achieved victory by working hand in hand with Iraq’s military to conduct pinpoint strikes. The effort was so effective that the enemy, al Qaeda in Iraq, stopped sending killers into Iraq because they would be exterminated quickly.

In December 2011, the U.S. military left, led by Army Gen. Lloyd J. Austin III, who now heads U.S. Central Command and is studying options for helping Baghdad survive absent U.S. combat troops.

The exit was completed too soon, Gen. Keane said.

SEE ALSO: Obama sending 275 U.S. troops to Iraq to protect embassy

“As we pulled out of Iraq in 2011, just think of this: We had all our intelligence capability there. We knew where the enemy was. We were flying drones. We’re tracking them. We have signals intelligence pouring in, eavesdropping on phone conversations and the rest of it. We’re using our counterterrorism forces to bang against these guys. We’re passing that information to the Iraqis so their commandos can do the same,” the general said.

After several years of reduced violence in Iraq, the Americans left.

“On a given day in 2011, that screen went blank. The Iraqis went from a significant amount of intelligence on what was taking place, and the screen just went blank,” Gen. Keane said.

Without on-the-ground guidance, the Iraqi army, on which the Pentagon spent much money and time, folded last week — too incompetent to stand and fight for the cities of Mosul and Tikrit.

Prime Minister Nouri al-Maliki’s best troops, his special operations units, are not yet in the fight in the north. Meanwhile, his strategy in the western town of Fallujah is to lay siege and unleash missile strikes to try to dismantle the radical Islamists amid the rubble.

Baghdad’s precarious state can be traced to what was done, then what was not, concerning a status of forces agreement with Washington.

Al-Maliki’s dilemma

In 2008, President Bush and Mr. al-Maliki signed a status of forces agreement that said all U.S. troops would leave by December 2011.

Supporters of the current administration say President Obama merely executed in 2011 what Mr. Bush signed in 2008.

Bush supporters counter that status of forces agreements often are amended to adapt to security environments. They argue that once Mr. al-Maliki secured a new term in December 2010, he had the political leverage to strike a deal that would allow a residual force to assist the Iraqi army in counterterrorism and maintain the flow of intelligence on terrorist targets.

Once Mr. al-Maliki repeated his demand for criminal jurisdiction over U.S. forces, the Obama administration stopped talking, a former defense official said. The White House planned to pull out of Iraq instead of engaging in tough negotiations to reach a compromise.

“There was no pushback,” said the former official, who travels to Baghdad periodically and has provided advice on border security with Syria, the main source of terrorist infiltration.

Around that time, Gen. Austin recommended a residual force of 23,000 troops, according to a second source familiar with the discussions.

A spokesman for U.S. Central Command did not comment.

The former official, who asked not to be named because he is not authorized by his employer, said it is possible for the al-Maliki regime to reverse ISIL gains. The prime minister needs parliament’s approval to move his best forces from Baghdad and Fallujah to engage the terrorists.

The source noted that Kurdish Peshmerga forces, renowned for their ferocity, retook the oil-rich town of Kirkuk. It shows that if the Iraqis are willing to fight, they can defeat the ISIL.

“This isn’t Patton’s army sweeping across France, pushing aside a broken Wehrmacht,” the former official said. “This is just termites infesting the house. And they just need a little bit of an exterminator to come in, which is a solid military. If the Peshmerga could throw these guys out of a city in five minutes, there’s no doubt the same could happen in Mosul and Tikrit.”

An army in disarray

Various press reports say ISIL forces briefly occupied Kirkuk before Kurdish fighters arrived to evict them in short order.

CBS News quoted fleeing Iraqi soldiers as saying their commanders abandoned their units, and with no one to lead them, they ran too.

“The army sucks,” the former defense official said. “When we left, they stopped training. They closed their training center. At the first sign of someone shooting at them, they take their uniforms off and run away.”

The source said such cowardly behavior might have been avoided if seasoned American advisers were on hand to direct the Iraqis. Also, a small contingent of U.S. air power could have destroyed the columns of ISIL fighters riding in pickup trucks before they entered Mosul or Tikrit.

James Russell, an instructor at the Naval Postgraduate School in Monterey, California, said the Iraqis wanted U.S. troops gone, so they left.

“It’s a nice idea that a few advisers hanging about telling them what to do would have changed things, somehow gotten them to behave and be more like us,” he said. “It’s a crock.”

“We built an army in South Vietnam equipped with the best gear money could buy and all the training imaginable,” Mr. Russell said. “They didn’t last long when the North Vietnamese drove down the road toward them.”

Gen. Keane is proposing some bold moves that Mr. Obama so far has ruled out.

One step that does not involve combat troops would be to send retired Army Gen. David H. Petraeus back to Iraq, this time to provide an assessment to Mr. Obama and advise Mr. al-Maliki. Gen. Petraeus was the top U.S. commander in Iraq during the 2007 troop surge.

Gen. Keane said the U.S. should again loop in the Iraqis on intelligence to find targets and then reintroduce special operations and U.S. airstrikes to kill them.

He also said Mr. al-Maliki must reverse his practice of firing competent generals and replacing them with cronies.

Without Washington’s immediate help, he sees the ISIL making historic gains for an al Qaeda-like Islamic terrorist group.

“The caliphate [Islamic state] is forming right before our eyes,” he said. “They’ve had the greatest success that’s ever been achieved since the organization was formed. They will begin to set the conditions for an assault on Baghdad. They will use [vehicle-borne improvised explosive devices] to soften it up. They’ll conduct raids. They’ll move in around the belt on Baghdad, and eventually they will launch a multiprong assault on Baghdad.”