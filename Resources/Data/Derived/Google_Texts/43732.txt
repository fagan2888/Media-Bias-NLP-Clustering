LONDON — Roger Federer pulled out of the ATP Finals less than one hour before his title match against Novak Djokovic on Sunday, handing a third straight title in this event to the top-ranked Serb and dealing a potential blow to Switzerland’s Davis Cup ambitions.

The 17-time Grand Slam champion said he hurt his back in the nearly three-hour semifinal win over Davis Cup teammate Stan Wawrinka on Saturday night in which Federer saved four match points.

“Unfortunately I’m not match fit,” the 33-year-old Swiss told the crowd at the O2 Arena. “I tried everything I could last night, also today: painkillers, treatment, rest, so forth, warm-up, until the very end. But I just can’t compete at this level with Novak. It would be too risky at my age to do this right now and I hope you understand.”

Fans appeared to be supportive with applause for Federer when he spoke.

Federer is set to play for Switzerland in the Davis Cup final against France, starting Friday. If he recovers in time, Federer will be chasing the only major trophy still eluding him. France hosts the match in the northern city of Lille.

Following back problems that ruined his 2013 season, Federer enjoyed a superb resurgence this season, losing to Djokovic in an epic Wimbledon final and adding five new titles to his collection.

Federer, the most successful player at the ATP Finals with six wins, also made it to the semifinals at the Australian Open and the U.S. Open and won his 23rd Masters title in Shanghai last month. He remained on course for the year-end No. 1 spot until this week and had dropped just one set on the way to the final.

“I hurt my back late in the match yesterday against Stan, I am very disappointed and I hope to be feeling better soon,” Federer added on his Facebook page. “It’s been an extremely difficult decision because I love playing in London and the ATP World Tour Finals have been an absolute highlight of my career. Unfortunately, my back problem does not allow me to play right now.”

Djokovic became the first player since Ivan Lendl from 1985-87 to win the year-end event three times in a row. He finished the season No. 1 for the third time in four years, becoming the seventh man to accomplish the feat at least three times. Besides winning his seventh Grand Slam title at the All England Club, Djokovic was also runner-up at the French Open, and won six titles.

Instead of facing Federer, Djokovic is playing an exhibition set with Andy Murray, before a doubles match pitting Murray and John McEnroe against Tim Henman and Pat Cash.