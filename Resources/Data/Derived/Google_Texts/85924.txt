In 2015, 120.8 million Americans adults lived in middle-class households, defined as having an income between two-thirds and double the median income, while 121.3 million Americans were in either the lower or upper-income tiers, according to a recent Pew analysis.

SLIDESHOW: The 10 Worst Cities for Middle Class Families

The ability to live comfortably on a middle class income varies greatly based on where you live. A new report from California’s Chapman University crunched the numbers to find out which cities are the best for middle class families. The study analyzed local incomes adjusted for cost of living, economic opportunity for middle class jobs, and family friendliness factors such as commute times, housing affordability and net migration of families.

The report’s authors concluded that Fresno, California, was the worst place in America for middle class families, thanks in part to the city’s high cost of living. The next two worst cities on the list were also located in the Golden State, Los Angeles and Stockton.

Metro areas with large populations and a high cost of living dominate the worst cities on the list. “It seems what we usually see as ‘fun cities’ — New York, Miami, Las Vegas, Los Angeles — are not so amenable to the new generation of young families,” the report states.

Smaller cities performed much better. Des Moines, Iowa, ranked first on the list, followed by Madison, Wisconsin, and Albany, New York.

“Our great urban centers and elite regions will continue to attract some of the unattached young, the restless, and the well-heeled for the foreseeable future,” the report states. “Increasingly, though, America’s children will be raised elsewhere, in places perhaps less celebrated but more amenable to the needs of families.”

Click here to see the 10 worst cities for middle class families.