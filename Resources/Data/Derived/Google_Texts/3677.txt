ZURICHâ€”UBS AG on Tuesday posted a gain in second-quarter profit, even as Switzerland's largest bank agreed to pay a legal settlement in Germany and disclosed U.S. probes into its dark pool alternative-trading system.

UBS reported a net profit of 792 million Swiss francs ($876 million) for the period, compared with 690 million francs in the same quarter last year, as the bank seeks better returns from a pared-down operation. The...