Congressional negotiators reached a deal late Monday on a massive spending bill to fund the government for the rest of 2014, agreeing to undo last year’s cut to military retirement benefits and a list of other GOP demands in exchange for the higher spending levels.

But some of the most interesting action happened on the sidelines, where negotiators agreed to strict rules to prevent the Internal Revenue Service from targeting groups for ideological scrutiny, and specifically banning the agency from targeting citizens “for exercising any right guaranteed under the First Amendment.”

Negotiators also agreed to block the Obama administration from imposing standards that effectively would prohibit the sale of incandescent light bulbs. The move continues a prohibition that Republicans imposed when they took control of the House in 2011.

PHOTOS: Eye-popping excuses in American political scandals

In addition, the bill slices $1 billion from an Obamacare fund that Republicans argued was turning into a slush fund for Health and Human Services Secretary Kathleen Sebelius.

“The bill reflects careful decisions to realign the nation’s funding priorities and target precious tax dollars to important programs where they are needed the most,” said House Appropriations Committee Chairman Harold Rogers, the Kentucky Republican who wrote the bill along with Senate Appropriations Committee Chairwoman Barbara A. Mikulski, Maryland Democrat.

The bill is more than three months overdue, since the fiscal year began Oct. 1. But the House and Senate stalemated over spending and funding for Obamacare, resulting in the partial government shutdown that dominated Washington for more than two weeks.

PHOTOS: Top 10 handguns in the U.S.

In order to end the shutdown, both sides agreed to negotiate a budget, which Congress passed in December, setting out the broad outlines of spending. The spending bill puts that budget into effect, divvying up the money among thousands of programs.

The new legislation will be put to votes in the House and Senate this week.

“This agreement shows the American people that we can compromise, and that we can govern. It puts an end to shutdown, slowdown, slamdown politics,” Ms. Mikulski said.

The 1,532-page bill spends a total of $1.012 trillion, or an average of more than $660 million per page.

Defense spending takes the biggest hit, falling from $605.4 billion in enacted funding in 2013 to $572.6 billion this year. Research and development, procurement and operations and maintenance were cut the most.

But defense officials have argued it is better than going through another year of the sequester cuts.

Republicans said they won a number of small policy-related fights.

The light bulb issue has been an ongoing battle for Republicans, who argued that if incandescent bulbs are inefficient, the market will weed them out naturally without government pressure.

Other battles Republicans said they won include continuing a ban on the District of Columbia using its local taxpayers’ money to fund abortions; limits on federal agencies’ spending on conferences; and halting new funding for the International Monetary Fund and the U.N. Educational, Scientific, and Cultural Organization.

Democrats, meanwhile, said they were able to restore money to domestic programs, easing cuts that House Republicans had planned, including higher spending on mental health programs, food aid, and early education.