The recession officially ended more than six years ago, but the ongoing recovery has been uneven in cities across the nation. Some cities with booming industries like tech and energy have bounced back more quickly. Others are still feeling the collateral damage of the recession, as their main industries continue to struggle.

Related: Stocks Are Sending a Recession Warning

A new study by WalletHub ranks the economic environment in the 150 largest cities in the U.S., using 17 variables including the rates of unemployment, poverty and violent crime as well as property values, changes in population and school quality.

WalletHub’s rankings list San Bernardino, Calif. as the city that has recovered the least, due to its having the lowest decrease in poverty rate and the second lowest home price appreciation. The city filed for Chapter 9 bankruptcy in 2012 and the proceeding is still pending in court, which helps explain why San Bernardino ranks as the city with the worst economic environment. Detroit, the largest and most famous U.S. city to file for bankruptcy, ranks ninth. It’s also ranked second-to-last overall for its economic environment.

On the other hand, Texas has four cities ranked in the top 10 most recession-recovered cities, with the state boasting America’s second fastest growing economy last year (5.2 percent) and a low unemployment rate (4.2 percent). Lubbock, Texas wins the title of the most recession-recovered city, helped by having a diversified economy, with large contributions from its agricultural industry and medical sector, and a high-ranking educational system. Lubbock’s “employment and earning opportunities” rank is second only to Denver’s.

Here are the 10 cities that have recovered the most — and the least — from the recession, according to WalletHub.

Least Recession-Recovered Cities

San Bernardino, Calif. Tucson, Ariz. North Las Vegas, Nev. Henderson, Nev. Glendale, Ariz. Modesto, Calif. Tempe, Ariz. Mesa, Ariz. Detroit, Mich. 10. Stockton, Calif.

Most Recession-Recovered Cities