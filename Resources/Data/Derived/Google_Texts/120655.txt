Senate GOP leaders face a major test over the next two weeks in trying to round up enough Republicans to back a bill that would gut Obamacare and strip funding from Planned Parenthood — but they’re caught in a tug-of-war between powerful conservative lobbies who view the issues in very different ways.

Standing on one side is the political-action wing of The Heritage Foundation, which says the bill should be rejected because, while denting the Affordable Care Act, it doesn’t effect a total repeal.

On the other side is a coalition of pro-life groups who say the chance to ding Planned Parenthood is too good to pass up, citing the release of undercover videos that appeared to show organization officials negotiating the sale of harvested fetal tissue.

At stake is the fast-track legislation itself, which was supposed to be a crowning GOP victory by avoiding a Democratic filibuster and getting a measure directly to the desk of President Obama, thereby forcing him to use his veto to defend his health care law.

The problem for Republican leaders lies in making the math work. Under the fast-track procedures, they just need a majority of 51 senators, and they hold 54 seats in the chamber.

But the pro-life groups say three Republicans who have wavered on defunding Planned Parenthood, namely Sens. Susan M. Collins of Maine, Mark Kirk of Illinois and Lisa Murkowski of Alaska, can’t be counted on when the vote comes.

Meanwhile, three conservatives — Sens. Marco Rubio of Florida, Ted Cruz of Texas and Mike Lee of Utah — have said they want to see a bigger strike at Obamacare. Their recalcitrance, combined with that of the three others wary of the Planned Parenthood issue, could sink the entire effort.

With Mr. Rubio and Mr. Cruz running for the White House, however, pro-life groups are casting the vote as a test of leadership.

“We are confident that all 51 pro-life senators will come together to defund Planned Parenthood and build consensus on gutting Obamacare,” said Mallory Quigley, spokeswoman for the Susan B. Anthony List, one of the pro-life groups that is exerting pressure, along with the Family Research Council.

Republican aides said the bill will make it to the floor as soon as this week as leadership tries to lock down votes in each corner of the caucus.

“Since all of our members support Obamacare repeal, we’re talking with all of them,” said Donald Stewart, spokesman for Senate Majority Leader Mitch McConnell, Kentucky Republican.

The bill, which uses a budget procedure known as “reconciliation” to avoid a Democratic filibuster, also faces technical hurdles. Top Democrats say the Senate’s referee — the parliamentarian — found that repealing Obamacare’s insurance mandates on individuals and employers would only have incidental budgetary effects, which puts that language in violation of the Budget Act.

Senate Republicans say they are working on a fix.

Still, the alliance of Messrs. Cruz, Rubio and Lee shows no signs of cracking. They have said they can’t vote for legislation unless it repeals every word of Obamacare.

It’s unclear whether Kentucky Sen. Rand Paul, who is also seeking the Republican presidential nomination, will vote “no.”

Conservative groups pushing for full repeal of Obamacare say leaders should have tried to defund Planned Parenthood as part of must-pass spending legislation instead of lumping it into the reconciliation bill.

“Republican leaders used this opportunity to turn two important conservative policy priorities into competing agendas and divide the conservative movement. This is leadership-orchestrated conservative sectarianism at its very worst,” Michael A. Needham, CEO of the political arm of the conservative Heritage Foundation, wrote in a recent op-ed for Breitbart.com.

“Reconciliation isn’t a test for President Rubio or President Cruz,” he said, “it is a test for the conservative movement and one our nation cannot afford for us to fail.”