ANALYSIS/OPINION:

For soldiers seeking to earn a green beret, the final test they have to pass at the John F. Kennedy Special Warfare School at Fort Bragg is a mentally and physically demanding field exercise called “Robin Sage.”

The student “alpha teams” are inserted (by parachute, mule, helicopter or on foot) in the North Carolina pine forest to reach a mock guerrilla” camp. Their mission is to earn the guerrillas’ trust and begin to train them in our ways of war.

At some point, each team is faced with being compelled by circumstance or ordered to participate in a war crime. The few who do never get a green beret. Donald Trump couldn’t pass that test.

Before the Dec. 15 debate, Mr. Trump said, “The other thing with the terrorists is you have to take out their families, when you get these terrorists, you have to take out their families. They care about their lives, don’t kid yourself. When they say they don’t care about their lives, you have to take out their families.” He said it again during the debate, so it wasn’t a slip of the tongue.

There’s a fundamental problem with Mr. Trump’s idea: What he advocated — twice — would be a war crime. The intentional killing of noncombatants obviously violates the Geneva Conventions and the Uniform Code of Military Justice. If any U.S. soldier — officer or enlisted — were ordered to do it he or she would be duty-bound and legally required to refuse to obey.

Military orders that require a violation of U.S. laws or treaties such as the Geneva Conventions are illegal. Soldiers, sailors, airmen and Marines are trained to know where they — personally — have to draw the line between a legal order and an illegal one. What Mr. Trump said obviously crosses the line and disqualifies him from being commander in chief.

Though it’s easy to see that Mr. Trump’s idea is far beyond the pale, there are other less-obvious instances of illegal orders. President Obama is intent on emptying the terrorist detention facility at Guantanamo Bay, Cuba, in order to close it. In his year-end press conference he promised to present a plan to close Gitmo to Congress and hinted that he would take executive action if congress fails authorize his plan.

On Nov. 23, Republican Rep. Mike Pompeo of Kansas and 15 other members of the House wrote to the Joint Chiefs of Staff concerning Mr. Obama’s possible action. The letter said that if Mr. Obama were to order the transfer of any Gitmo inmates to prisons in the United States, that action would conflict with U.S. law, and the president’s orders would thus be illegal.

For several years, the National Defense Authorization Act has prohibited the president from transferring any Gitmo inmates to any prison in the United States. Last month, U.S. Attorney General Loretta Lynch admitted to the House Judiciary Committee that transferring Gitmo inmates to U.S. prisons would violate the ban. The new National Defense Authorization Act for 2016, signed by Mr. Obama, continues the ban and extends the restrictions on where the inmates can be sent abroad.

Mr. Pompeo’s letter points out that Mr. Obama has previously tried to transfer Gitmo inmates to prisons in Illinois and Michigan. The 16 congressmen who signed it write, perhaps too mildly, that if Mr. Obama orders any Gitmo inmate transferred to the United States under his new plan, the order would be illegal. Putting the Joint Chiefs on notice may appear redundant, but remember that the five Taliban leaders swapped for Sgt. Bowe Bergdahl were released in violation of the law which, at the time, required that Congress be notified 30 days in advance of any such release.

Transferring Gitmo inmates to America wouldn’t be as serious as a war crime, but it would be a violation of the law. Any officer who, despite the law, ordered his subordinates to follow an Obama order to transfer the terrorists to U.S. prisons would be guilty of obeying an illegal order and would be subject to court martial.

Even if that were not the case, the Joint Chiefs must realize that the president’s rationale for closing Gitmo is entirely spurious.

Before he was president, and on many occasions since he was elected, Mr. Obama had insisted that America had to close Gitmo. He has claimed that Gitmo robs our war efforts of legitimacy. He says that Gitmo is a danger to our national security because it is a symbol of American misdeeds that helps terrorist networks like al Qaeda and ISIS to recruit their jihadists.

The simple truth is that it doesn’t matter where we imprison terrorists: Those still at large — and the left’s anti-anti-terrorists — will continue to insist on Mr. Obama’s narrative. They will never be satisfied until we hold no terrorist prisoners anywhere for any length of time.

Gitmo should not just be kept open. Its population should be increased by every terrorist we capture. They should be held there as long as we need to so we can milk them for whatever intelligence information may be in their heads and for as long as it may take to ensure they’re no longer a danger to us. Too many — roughly 30 percent — of those released from Gitmo have either been confirmed to have returned to terrorism or are suspected of having done so.

If Mr. Obama orders the military to move Gitmo’s inmates to U.S. prisons, the order will be illegal and — under the law — must be disobeyed.

• Jed Babbin served as a deputy undersecretary of defense in the George H.W. Bush administration. He is a senior fellow of the London Center for Policy Research and the author of five books, including “In the Words of Our Enemies” (Regnery, 2007).