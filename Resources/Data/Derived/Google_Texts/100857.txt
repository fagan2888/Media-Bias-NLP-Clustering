Mayor Bill de Blasio visited the Corona Family Residence, a homeless facility in Queens, on Monday. Steve Remich for The Wall Street Journal

New York State reversed course Friday and said it would not take away funding from 16 city homeless shelters that investigators found to be in poor condition, ending a tiff over the city’s near-record homelessness.

On Tuesday, state officials said that the shelters had an array of violations and that the city had not moved quickly enough to fix the problems. They vowed to withhold reimbursement funding until the city corrected the problems.

“The violations range from severe electrical, gas, and plumbing issues that have gone uncorrected for a significant period of time and in direct violation of local building codes. Further, several buildings are housing individuals and families despite serious structural issues that could endanger the health of those individuals and families,” the state’s letter said.

The state’s Office of Temporary Disability Assistance said Friday it was in talks with the city, and the mayor’s administration had promised to submit a plan by next Tuesday for correcting the shelters. Therefore, the state would no longer withhold funding.

“Throughout this process, OTDA’s ultimate goal was not to withhold funding, but rather to ensure that ‎egregious issues at City homeless shelters that put the health and safety of New York’s most vulnerable citizens at risk are resolved,” Sharon Devine, the office’s executive deputy commissioner, said in a statement.

Before the state’s decision was announced, Mayor Bill de Blasio said the city was already working to fix the shelters, which had dozens of violations, by sending in emergency teams to address violations. City Hall mobilized elected officials and advocates across the city to pressure the state into not withholding the money.

Homelessness has risen under Mr. de Blasio’s administration to about 57,000 people in shelters, up about 4,000 from when Mayor Michael Bloomberg left office. The mayor said earlier this month he would dedicate an additional $100 million in the upcoming budget to homelessness.

“We are happy to see the State reverse their decision to withhold funding from shelters housing thousands of children, and we thank the dedicated elected officials and advocates who stood up to protect these vulnerable New Yorkers,” said Ishanee Parikh, a spokeswoman for the mayor.