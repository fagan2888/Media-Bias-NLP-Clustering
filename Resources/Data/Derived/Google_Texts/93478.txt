Florida lawmakers are boosting education spending—though not by as much as they’d hoped. And they’re putting more into healthcare—a move they hadn’t planned for. Education and healthcare spending compose the largest parts of the state budget—and trying to balance the two issues has been a struggle.

When lawmakers learned the state had a nearly $1 billion budget surplus, they mostly knew where they wanted to put it: education.

Governor Rick Scott proposed a big jump in per-student funding. He wanted the state to spend nearly $20 billion, and increase per-student spending to $7,126—which would have set a state record. But then came news the state’s healthcare budget would be dealt a $1 billion blow with a loss of federal funding. The Florida School Board Association’s Ruth Melton says the picture emerging is now is a mixed bag.

“There are a couple of areas in particular that are still behind the curve from where we were, even as we approach matching the total funding amount from 2007-08," she said.

The Florida legislature is putting in about $7,100 per student into schools this year. And while it’s not quite at the record levels the Governor had sought, Melton says her organization is satisfied.

“The answer is, it will be sufficient. It may not be generous, or as generous as it sounds, but it will be sufficient for school districts to move forward and put the programs in place and pursue the initiatives they’d like to pursue," Melton said.

Traditional public schools, charter schools, colleges and universities will also split critical school construction funding—and the universities will get an additional $150 million in new funding to divvy up between the public universities based on performance . The Florida Board of Governors, which oversees the public universities, had requested $300 million in new money. The belt-tightening in education and other areas of the budget emerged due to a big fight in healthcare. And that fight is still simmering:

“You said the federal government made life challenging, and I was wondering what you meant by that," Rep. David Richardson, D-Miami, asked Rep. Matt Hudson, R-Naples, during the House's questions session on the budget. "They made life challenging by failing to respond in a timely manner that put us in a position t have a special session. I’d say that’s a challenge," Hudson replied.

This year’s budget includes $450 million in general revenue to support a joint federal and state program that reimburses hospitals for uncompensated care. The federal government has signaled for more than a year it planned to phase out the Low Income Pool and started decreasing its funding this year. The feds maintain the dollars could be made up if the state expanded Medicaid under the Affordable Care Act. But the Florida legislature refused that option—leading to the drop in the program and the push to make up the support another way. And Senate President Andy Gardiner says the issue will continue next year.

“Certainly the healthcare issues aren’t going away. Senator Bean has encouraged us to look at some type of joint commission of legislatures that can look at not just cost, but the uninsured and maybe we can come back as a united front and try to come up with something long-term," he said.

Even as the low-income pool funding continues to dwindle, another blow to state healthcare could be looming. The U.S. Supreme Court will soon rule on whether subsidies for people who purchased health insurance on the federal government’s insurance exchanges, are legal. And Florida is one of more than 30 states that use a federal exchange. If the Supreme Court strikes down the subsidies, more than 1.3 million Floridians could lose their health insurance or end up paying way more for it. And it would put pressure on lawmakers on both sides of the isle to come up with a solution.