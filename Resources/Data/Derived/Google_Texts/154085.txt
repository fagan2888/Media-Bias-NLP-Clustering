KIEV (AP) — About 50,000 demonstrators rallied in the center of Kiev on Sunday to demand that the Ukrainian government reverse course and sign a landmark agreement with the European Union in defiance of Russia.

The protest was the biggest Ukraine has seen since the peaceful 2004 Orange Revolution, which overturned a fraudulent presidential election result and brought a Western-leaning government to power.

The rally was led by Ukraine’s top opposition figures, who called for the protests to continue until President Viktor Yanukovych agreed to sign the free trade and political association deal with the EU at a summit on Friday.

As during the Orange Revolution, the opposition set up tents and encouraged supporters to spend the night. It was unclear how many would stay, with temperatures in the 40s Fahrenheit and rain forecast.

Sunday’s demonstration was sparked by anger over the government’s sudden move last week to pull out of the EU agreement and focus instead on trade ties with Russia, under strong pressure from Moscow.

After the rally at European Square, dozens of protesters clashed with police and pro-Russia activists near the government building, while another standoff took place outside Mr. Yanukovych’s office. Police said they used tear gas at the government building after protesters threw a smoke bomb and refused to back off.

A larger crowd of several thousand headed for nearby Independence Square, planning to continue the protest. Meanwhile, Yanukovych supporters held their own rally on another Kiev square.

The pro-EU demonstrators, carrying giant Ukrainian and EU flags, chanted, “Ukraine is Europe,” and sang the national anthem as they marched toward European Square for the rally.

“Should we go toward Europe or toward Russia? It’s a choice between the past and the future,” opposition leader Arseniy Yatsenyuk, a top ally of imprisoned former Prime Minister Yulia Tymoshenko, told the crowd.

In an emotional letter read to demonstrators by her daughter, Mrs. Tymoshenko called on Ukrainians to continue demonstrating until Mr. Yanukovych signs the EU deal.

“Don’t let him humiliate us all in this way,” Eugenia Tymoshenko read out, shaking from cold and emotion. “It’s our road map to a normal life.”

The protesters responded with chants of “Freedom to Yulia” and “Down with the gang,” a reference to Mr. Yanukovych and his government.

U.S. and EU officials expressed deep disappointment with Ukraine’s decision, and U.S. Secretary of State John F. Kerry canceled a visit to Kiev in early December.

EU Enlargement Commissioner Stefan Fuele, who has been lobbying for the deal for years, indicated Sunday that the deal is was still on the table. In a Twitter post written in English, Ukrainian and Russian, Mr. Fuele said, “Our commitment to modernization of Ukraine remains firm, door remains open, benefits 4 neighbours too, despite rhetoric.”

One key EU demand for signing the deal is the release of Mrs. Tymoshenko, whose imprisonment the West sees as politically driven. Mr. Yanukovych narrowly defeated Mrs. Tymoshenko in the 2010 presidential election. He comes up for re-election in 2015, and Mrs. Tymoshenko accuses him of keeping her behind bars to prevent her from running.

Yuri Lutsenko, a Tymoshenko ally who recently was released from jail on charges the West also called politically motivated, struck a more militant tone, asking the protesters whether they were ready to fight for their country’s future.

“They declared war on us,” Mr. Lutsenko told the crowd. “Are we ready to take on this challenge?”

• Associated Press writer Mark Rachkevych contributed to this article.