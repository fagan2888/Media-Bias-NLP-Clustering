Congressional leaders agreed Tuesday to a sweeping deal that would fund the government through October, extend a package of popular tax breaks and lift the decades-old ban on U.S. oil exports — a key policy win for GOP lawmakers who nonetheless said they didn’t get everything they wanted out of the deal.

House Speaker Paul D. Ryan told Republican members that Capitol Hill negotiators and the White House had reached the agreement on the $1.1 trillion spending bill after working into the night on which policy add-ons to include in the package, according to members who emerged from the closed-door meeting.

Lawmakers said a parallel deal on tax breaks would delay a pair of unpopular Obamacare levies for two years.

Meanwhile, the spending portion continues to hamstring an Obamacare program that was supposed to protect insurers against heavy losses during the first three years of the program.

Members said they expected the bills to be posted by midnight Tuesday, though some details trickled out early.

The package includes funding for workers who responded to the terrorist attacks on Sept. 11, 2001, and it would not allow Puerto Rico to leverage U.S. bankruptcy laws, as the island territory navigates its way out of a fiscal morass.

Several House Republicans who emerged from a closed-door meeting said the bill amounted to a true compromise that would let them to put a tumultuous year behind them.

“Let’s move past 2015 and move on to 2016,” said Rep. John Kline, Ohio Republican.

The congressman said he planned to support both pillars of the deal, despite his disappointment with the spending portion.

“There were a lot of riders that we had — a lot of them important to me — that are not, apparently, going to be in there,” he said.

Democrats said they’d already won the biggest fight by preventing Republicans from clamping down on President Obama’s pledge to accept 10,000 Syrian refugees for resettlement in the U.S. in fiscal year 2016.

The oil exports ban had been a key question throughout Tuesday, as Democrats insisted that any such move be coupled with more action on green energy and a commitment that the U.S. pony up billions of dollars to pay other countries to adjust to global warming.

Yet the oil exports ban had been the key question throughout Tuesday, as Democrats insisted on — and received — a five-year extension of tax credits for solar- and wind-energy producers.

Democrats said any boost to the energy sector should be even-handed and in line with vows they made to fight climate change as part of an international accord struck in Paris over the weekend.

“In negotiations like this you win some, you lose some. Democrats won some, they lost some. We won some, we lost some,” Mr. Ryan, Wisconsin Republican, said earlier in the day at a breakfast hosted by Politico. “At the end of the day, we’re going to get this done.”

While House GOP leaders got a head start, Senate leaders planned meetings Wednesday to inform their colleagues about the details, which had been written behind closed doors by a select handful of people.

The negotiations had taken longer than expected, as both sides grappled with the GOP policy add-ons, or “riders,” that attacked various aspects of Mr. Obama’s agenda, while Democrats demanded an end to the federal ban on research into the causes of gun violence.

Top Republicans were already looking ahead to next year, saying they agreed to Democrats’ spending levels for 2017 and will expect them to cooperate earlier next year in writing the dozen spending bills that are supposed to be passed each year to fund the government.

The process ground to a halt this year after Senate Democrats filibustered, and internal fights within the GOP short-circuited House action.

That left Congress with the option of a catch-all “omnibus,” where all 12 bills are wrapped into a massive measure and lawmakers are forced to take it or leave it — with the threat of a government shutdown if they don’t approve it.

“We shouldn’t be doing things like this,” Mr. Ryan said.

Though the deal wouldn’t dent Mr. Obama’s plan to accept more Syrian refugees — conservatives wanted to pause the program in the wake of the Nov. 13 terror attacks in Paris — it would tighten up the visa waiver program that now makes it easier for citizens of 38 countries to travel to the U.S., a policy that has much more bipartisan support.

Another point of contention is the Puerto Rico fiscal crisis. Democrats want to give the territory the power to declare bankruptcy, but Republicans insisted on finding another solution for a $1 billion debt payment due Jan. 1.

The bill ponies up new funding for the Zadroga Act, a Sept. 11 first-responder health-care bill that was first authorized in 2010 and will expire by the end of the month.

On the tax side, Democrats wanted to permanently extend the child tax credit, saying families deserved tax relief alongside business interests favored by the GOP.

Republican members late Tuesday said they already grabbed a two-year delay to Obamacare’s 2.3-percent excise on medical device sales, which took effect in 2013 and would disappear in 2016 and 2017, and its “Cadillac” tax on generous health plans offers by some plans.

The latter levy, which was set to take effect in 2018, has been a key target for both parties, including Democrats who support the Affordable Care Act overall but worry about labor unions’ vociferous opposition to the tax.

The administration opposes a delay to the Cadillac tax, saying it’s designed to tamp down on overly generous benefits that encourage the overuse of health care, raising costs for everyone.

White House press secretary Josh Earnest said the administration objects to lifting the oil exports ban, though he stopped short of saying it would prompt a presidential veto.

“Our position on the export ban is pretty clear. We do not support legislation that would lift it,” he said. “But we have also acknowledged that an omnibus bill is going to have to be a compromised proposal.”