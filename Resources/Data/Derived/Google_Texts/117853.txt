An effort by Puerto Rico to remake its finances was thrown into uncertainty after a federal judge in San Juan blocked a law that would have allowed some public agencies to restructure their debts.

In a decision Friday prohibiting the U.S. commonwealth from enforcing the so-called Recovery Act, Judge Francisco A. Besosa said the law, passed in June 2014, is pre-empted by federal bankruptcy code and is therefore void under the U.S....